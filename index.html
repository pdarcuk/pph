!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pigpen Helper (Web)</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      max-width: 700px;
      margin: auto;
      padding: 1.5rem;
      line-height: 1.5;
    }
    textarea {
      width: 100%;
      height: 120px;
      font-family: monospace;
      padding: 0.5rem;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    output {
      display: block;
      white-space: pre-wrap;
      background: #f5f5f5;
      padding: 1rem;
      margin-top: 1rem;
      border-radius: 8px;
      min-height: 60px;
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: 600;
    }
    .hidden {
      display: none;
    }
    button {
      margin-top: 1rem;
      padding: 0.6rem 1rem;
      font-size: 1rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: #2d81ff;
      color: #fff;
    }
    button:hover {
      background: #1c5ed6;
    }
  </style>
</head>
<body>
  <h1>Pigpen Helper (Web)</h1>
  <p>Pick a mode, type your text, and press <strong>Run</strong>.</p>

  <label>
    Mode:
    <select id="mode">
      <option value="encode">Encode to Pigpen</option>
      <option value="decode">Decode from Pigpen</option>
      <option value="decodeShift">Decode + Caesar shift</option>
    </select>
  </label>

  <label id="shiftLabel" class="hidden">
    Caesar shift (N):
    <input type="number" id="shift" value="3" style="width:4rem;" />
  </label>

  <label>
    Input:
    <textarea id="input"></textarea>
  </label>

  <button id="run">Run</button>

  <output id="out"></output>

  <script>
    /*
      Quickâ€‘start Pigpen mapping. These are **placeholder** symbols (circled letters)
      so the tool runs outâ€‘ofâ€‘theâ€‘box in any browser. Replace each value with the
      actual Pigpen glyphs, SVG paths, or an imported Pigpen font when youâ€™re ready.
    */
    const pigpen = {
      'A':'ðŸ…','B':'ðŸ…‘','C':'ðŸ…’','D':'ðŸ…“','E':'ðŸ…”','F':'ðŸ…•','G':'ðŸ…–','H':'ðŸ…—','I':'ðŸ…˜',
      'J':'ðŸ…™','K':'ðŸ…š','L':'ðŸ…›','M':'ðŸ…œ','N':'ðŸ…','O':'ðŸ…ž','P':'ðŸ…Ÿ','Q':'ðŸ… ','R':'ðŸ…¡',
      'S':'ðŸ…¢','T':'ðŸ…£','U':'ðŸ…¤','V':'ðŸ…¥','W':'ðŸ…¦','X':'ðŸ…§','Y':'ðŸ…¨','Z':'ðŸ…©'
    };

    const reversePigpen = Object.fromEntries(
      Object.entries(pigpen).map(([k,v])=>[v,k])
    );

    function caesar(str, shift){
      return str.replace(/[A-Z]/gi, c=>{
        const base = c>='a' ? 'a'.charCodeAt(0) : 'A'.charCodeAt(0);
        return String.fromCharCode((c.charCodeAt(0)-base+shift+26)%26 + base);
      });
    }

    function encode(text){
      return text.toUpperCase().replace(/[A-Z]/g, c=>pigpen[c] || c);
    }

    function decode(text){
      return text.split(/\s+/).map(sym=>reversePigpen[sym] || sym).join('');
    }

    const modeSel = document.getElementById('mode');
    const shiftInput = document.getElementById('shift');
    const shiftLabel = document.getElementById('shiftLabel');

    modeSel.addEventListener('change', () => {
      shiftLabel.classList.toggle('hidden', modeSel.value !== 'decodeShift');
    });

    document.getElementById('run').addEventListener('click', () => {
      const inp = document.getElementById('input').value.trim();
      let result = '';
      switch (modeSel.value) {
        case 'encode':
          result = encode(inp);
          break;
        case 'decode':
          result = decode(inp);
          break;
        case 'decodeShift':
          const decoded = decode(inp);
          const shift = parseInt(shiftInput.value) || 0;
          result = caesar(decoded, shift);
          break;
      }
      document.getElementById('out').textContent = result;
    });
  </script>
</body>
</html>
